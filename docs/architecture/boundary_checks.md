# Локальні boundary-checks (B1)

Ціль: легкий локальний гейт проти:

- хаотичних імпортів між шарами;
- появи нових `utils.py` як «смітника».

Це **не CI** і не лінтер. Це швидка перевірка, яку можна запускати вручну перед змінами.

## Як запускати

Команда:

`python tools/check_import_boundaries.py`

## Pre-commit (R1)

Щоб boundary-check запускався автоматично перед комітом:

- pre-commit має бути встановлений у **активному venv**.
- `python -m pre_commit install`

Щоб прогнати перевірку по всьому репо:

- `python -m pre_commit clean`
- `python -m pre_commit run --all-files`

## Що перевіряється

Налаштування живуть у `tools/import_rules.toml`.

### 1) Межі модулів (імпорти)

Перевірка парсить `import ...` / `from ... import ...` через `ast` і застосовує прості правила на рівні top-level пакетів.

Базове правило, яке зараз увімкнене:

- `core/*` **не має** імпортувати інші top-level пакети репо (наприклад `UI`, `data`, `smc_core` тощо).

### 2) Анти-`utils.py`

Будь-який файл з ім'ям `utils.py`, який **не** внесений в allowlist у `tools/import_rules.toml`, вважається помилкою.

Це зупиняє появу нових `utils.py` і змушує називати модулі по суті.

### 3) Заборонені рядки (R3)

Якщо в `.py` файлах зустрічається заборонений рядок, hook падає. Наприклад: `fxcm:price_tick` заборонено; канон — `fxcm:price_tik`.

## Exit codes

- `0` — порушень не знайдено.
- `1` — знайдено порушення.
- `2` — проблема з конфігом/читанням файлів.
